<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Defined Type: rspamd::rmilter::config
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_defined_types::rspamd::rmilter::config";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_defined_type_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (r)</a> &raquo;
    <span class='title'><span class='object_link'>Defined Types</span></span>
     &raquo; 
    <span class="title">rspamd::rmilter::config</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Defined Type: rspamd::rmilter::config</h1>
<div class="box_info">
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/rmilter/config.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  this type manages a single config entry

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<h1 id="label-rspamd-3A-3Armilter-3A-3Aconfig">rspamd::rmilter::config</h1>

<p>Rmilter uses the same UCL (Unified Configuration Language) format as
rspamd. See rspamd::config for details.</p>

<p>However, because rmilter&#39;s config is much simpler, and this module does
not to intend its legacy features that have been migrated to rspamd, it
only supports the single rmilter.conf.local config file.</p>

<h2 id="label-Title-2FName+format">Title/Name format</h2>

<p>For convenience reasons, this resource also allows to encode the values for
$section and $key into the resource&#39;s name (which is usally the same as
its title).</p>

<p>If the $name of the resource matches the format
“&lt;sections&gt;.&lt;name&gt;”, and both $sections and $key have not been
specified, the values from the name are used. This simplifies creating
unique resources for identical settings in different files.</p>

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>sections</span>
      
      
        <span class='type'>(<tt>Optional[Array[String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An array of section names that define the hierarchical name of this key.
E.g. <code>[&quot;classifier&quot;, &quot;bayes&quot;] to denote
the</code>classifier “bayes” {` section.</p>

<p>If arrays of values are required (including arrays of maps, i.e. multiple
sections with the same name), the key must be succeeded by an bracketed
index, e.g.</p>

<pre class="code ruby"><code class="ruby">sections =&gt; [&quot;statfile[0]&quot;],
key      =&gt; &quot;token&quot;,
value    =&gt; &quot;BAYES_HAM&quot;,

sections =&gt; [&quot;statifle[1]&quot;],
key      =&gt; &quot;token&quot;,
value    =&gt; &quot;BAYES_SPAM&quot;,</code></pre>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The key name of the config setting. The key is expected as a single
non-hierachical name without any sections/maps.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the value of this config entry. See <code>type</code> for allowed types.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Rspamd::Ucl::ValueType</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;auto&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The type of the value, can be <code>auto</code>, <code>string</code>,
<code>number</code>, <code>boolean</code>.</p>

<p>The default, <code>auto</code>, will try to determine the type from the
input value: Numbers and strings looking like supported number formats
(e.g. “5”, “5s”, “10min”, “10Gb”, “0xff”, etc.) will be output literally.
Booleans and strings looking like supported boolean formats (e.g. “on”,
“off”, “yes”, “no”, “true”, “false”) will be output literally. Everything
else will be output as a strings, unquoted if possible but quoted if
necessary. Multi-line strings will be output as &lt;&lt;EOD heredocs.</p>

<p>If you require string values that look like numbers or booleans, explicitly
specify type =&gt; &#39;string&#39;</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>comment</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an optional comment that will be written to the config file above the entry</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ensure</span>
      
      
        <span class='type'>(<tt>Enum['present', 'absent']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;present&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether this entry should be <code>present</code> or <code>absent</code>.
Usually not needed at all, because the config file will be fully managed by
puppet and re-created each time.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Bernhard Frauendienst <a
href="mailto:puppet@nospam.obeliks.de">puppet@nospam.obeliks.de</a></p>
</div>
      
    </li>
  
</ul>

</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/rmilter/config.pp', line 73</span>

define rspamd::rmilter::config (
  Optional[Array[String]] $sections = undef,
  Optional[String] $key             = undef,
  $value,
  Rspamd::Ucl::ValueType $type      = &#39;auto&#39;,
  Optional[String] $comment         = undef,
  Enum[&#39;present&#39;, &#39;absent&#39;] $ensure = &#39;present&#39;,
) {
  $full_file = &quot;${rspamd::rmilter::config_path}/rmilter.conf.local&quot;

  if (!$key and !$sections and $name =~ /\A(.+\.)?([^.]+)\z/) {
    $configsections = split($1, &#39;\.&#39;)
    $configkey = $2
  } else {
    $configsections = pick($sections, [])
    $configkey = pick($key, $name)
  }

  $full_key = join($configsections + $configkey, &#39;/&#39;)
  notice(&quot;full key = ${full_key}, sections = ${configsections}&quot;)
  rspamd::ucl::config { &quot;rmilter config ${full_file} ${full_key}&quot;:
    file     =&gt; $full_file,
    sections =&gt; $configsections,
    key      =&gt; $configkey,
    value    =&gt; $value,
    type     =&gt; $type,
    comment  =&gt; $comment,
    ensure   =&gt; $ensure,
    notify   =&gt; Service[&#39;rmilter&#39;],
  }
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
  Generated on Fri May 26 14:18:27 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.3.4).
</div>

    </div>
  </body>
</html>